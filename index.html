<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Client Calendar</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="icon.png">
  <script type="application/manifest+json">
    {
      "name": "Client Calendar",
      "short_name": "Calendar",
      "start_url": ".",
      "display": "standalone",
      "background_color": "#fffaf0",
      "theme_color": "#87ceeb",
      "icons": [
        {
          "src": "icon.png",
          "sizes": "192x192",
          "type": "image/png"
        }
      ]
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&family=Open+Sans:wght@400&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      margin: 0;
      padding: 0;
      background: #fffaf0; /* Floral White for a soft, fun background */
      color: #333;
    }
    .month-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      background: #87ceeb; /* Sky Blue for a fun, calming header */
      border-bottom: 1px solid #ddd;
      font-family: 'Poppins', sans-serif; /* Cooler font for headers */
      font-size: 28px;
      font-weight: 600;
    }
    .month-header button {
      font-size: 24px;
      padding: 15px 25px;
      background: #ffb6c1; /* Light Pink for fun accent */
      color: #fff;
      border: none;
      border-radius: 10px;
      min-width: 60px;
      cursor: pointer;
    }
    #month-title {
      font-size: 28px;
    }
    .day-scroller {
      display: flex;
      overflow-x: auto;
      padding: 15px;
      background: #fff;
      margin-bottom: 10px;
      -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
      scroll-snap-type: x proximity; /* Smooth snap for mobile swipe */
      scroll-behavior: smooth; /* Smooth scrolling behavior */
    }
    .day-button {
      flex: 0 0 auto;
      padding: 15px;
      margin-right: 10px;
      border-radius: 15px;
      background: #e6f0fa; /* Light Blue for a fun, airy feel */
      text-align: center;
      min-width: 80px;
      max-width: 80px;
      border: 2px solid #ddd;
      cursor: pointer;
      overflow: hidden; /* Prevent overflow */
      white-space: nowrap;
      text-overflow: ellipsis; /* Ellipsis for long day names */
    }
    .day-button.selected {
      background: #ff9500; /* Orange for selection, fun highlight */
      color: #fff;
      border-color: #ff9500;
    }
    .day-button.today {
      background: #ffe4e1; /* Misty Rose for today, subtle fun */
      border-color: #007aff;
    }
    .day-text {
      font-size: 22px;
      font-weight: 600;
      font-family: 'Poppins', sans-serif; /* Cooler font for day text */
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .client-list {
      padding: 15px;
      background: #fff;
      border-radius: 15px;
      margin: 10px;
    }
    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      font-family: 'Poppins', sans-serif; /* Cooler font for headers */
    }
    #day-title {
      font-size: 30px;
      font-weight: 600;
    }
    #client-list {
      list-style: none;
      padding: 0;
    }
    .client-item {
      display: flex;
      justify-content: space-between;
      padding: 15px;
      border-bottom: 1px solid #ddd;
      background: #f9f9f9;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .client-name { font-size: 20px; font-weight: 700; font-family: 'Poppins', sans-serif; }
    .client-phone, .client-request { font-size: 18px; color: #666; }
    .client-price { font-size: 20px; font-weight: 700; color: #ff9500; /* Fun orange for price */ }
    .empty-text { font-size: 20px; color: #666; text-align: center; margin: 20px 0; }
    .add-button {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 70px;
      height: 70px;
      background: #007aff; /* Blue as requested */
      border-radius: 35px; /* Circle format */
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      font-size: 40px;
      color: #fff;
      font-weight: 700;
      border: 2px solid #fff; /* Square-circle feel with border */
    }
    .form {
      padding: 20px;
      background: #fff;
      border-radius: 15px;
      margin: 10px;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 400px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    .form h2 { font-size: 28px; margin-top: 0; font-weight: 700; font-family: 'Poppins', sans-serif; color: #007aff; }
    .form label { font-size: 20px; display: block; margin-top: 15px; }
    .form input {
      width: 100%;
      padding: 15px;
      font-size: 18px;
      border: 2px solid #ddd;
      border-radius: 10px;
      margin: 5px 0;
    }
    .suggestions {
      display: flex;
      overflow-x: auto;
      margin: 5px 0;
      max-height: 100px;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }
    .suggestion-item {
      background: #e6f0fa;
      padding: 10px 15px;
      border-radius: 10px;
      margin-right: 10px;
      font-size: 18px;
      cursor: pointer;
    }
    .form-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .form-buttons button {
      padding: 15px 30px;
      font-size: 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    .form-buttons button:first-child { background: #ddd; }
    .form-buttons button:last-child { background: #007aff; color: #fff; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div id="app">
    <div class="month-header">
      <button onclick="changeMonth(-1)">&lt;</button>
      <span id="month-title"></span>
      <button onclick="changeMonth(1)">&gt;</button>
    </div>
    <div class="day-scroller" id="day-scroller"></div>
    <div class="client-list">
      <div class="day-header">
        <span id="day-title"></span>
        <button onclick="setToday()">Today</button>
      </div>
      <ul id="client-list"></ul>
    </div>
    <div id="add-form" class="form hidden">
      <h2>Add Client</h2>
      <label>Name:</label>
      <input id="add-name" type="text" oninput="updateSuggestions()">
      <div id="suggestions-name" class="suggestions"></div>
      <label>Phone Number:</label>
      <input id="add-phone" type="tel" oninput="updatePhoneSuggestions()">
      <div id="suggestions-phone" class="suggestions"></div>
      <label>Service:</label>
      <input id="add-request" type="text" placeholder="e.g., Hem pants">
      <label>Time (optional):</label>
      <input id="add-time" type="text" placeholder="e.g., 3:30 PM">
      <label>Price:</label>
      <input id="add-price" type="number" step="0.01" placeholder="e.g., 25.00">
      <div class="form-buttons">
        <button onclick="cancelForm()">Cancel</button>
        <button onclick="saveClient()">Save</button>
      </div>
    </div>
    <div id="edit-form" class="form hidden">
      <h2>Edit Client</h2>
      <input type="hidden" id="edit-id">
      <label>Name:</label>
      <input id="edit-name" type="text">
      <label>Phone Number:</label>
      <input id="edit-phone" type="tel">
      <label>Service:</label>
      <input id="edit-request" type="text">
      <label>Time (optional):</label>
      <input id="edit-time" type="text">
      <label>Price:</label>
      <input id="edit-price" type="number" step="0.01">
      <div class="form-buttons">
        <button onclick="cancelForm()">Cancel</button>
        <button onclick="deleteClient()">Delete</button>
        <button onclick="updateClient()">Save</button>
      </div>
    </div>
    <div class="add-button" onclick="showAddForm()"></div>
  </div>
  <script>
    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    let clients = JSON.parse(localStorage.getItem('clients')) || [];
    let selectedDate = new Date();
    selectedDate.setHours(0, 0, 0, 0);
    let monthOffset = 0;

    function saveClients() {
      localStorage.setItem('clients', JSON.stringify(clients));
    }

    function getMonthStart(offset) {
      const d = new Date();
      d.setMonth(d.getMonth() + offset);
      d.setDate(1);
      d.setHours(0, 0, 0, 0);
      return d;
    }

    function getDaysInMonth(offset) {
      const start = getMonthStart(offset);
      const days = [];
      const daysInMonth = new Date(start.getFullYear(), start.getMonth() + 1, 0).getDate();
      for (let i = 1; i <= daysInMonth; i++) {
        const d = new Date(start);
        d.setDate(i);
        days.push(d);
      }
      return days;
    }

    function renderCalendar() {
      const monthStart = getMonthStart(monthOffset);
      document.getElementById('month-title').textContent = `${months[monthStart.getMonth()]} ${monthStart.getFullYear()}`;
      const days = getDaysInMonth(monthOffset);
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      const scroller = document.getElementById('day-scroller');
      scroller.innerHTML = '';
      days.forEach(date => {
        const isToday = date.toDateString() === today.toDateString();
        const isSelected = date.toDateString() === selectedDate.toDateString();
        const button = document.createElement('div');
        button.className = `day-button ${isSelected ? 'selected' : ''} ${isToday ? 'today' : ''}`;
        button.innerHTML = `<div class="day-text">${date.getDate()} ${date.toLocaleDateString('en-US', { weekday: 'long' })}</div>`;
        button.onclick = () => {
          selectedDate = date;
          renderCalendar();
          renderClients();
        };
        scroller.appendChild(button);
      });
    }

    function renderClients() {
      const list = document.getElementById('client-list');
      list.innerHTML = '';
      document.getElementById('day-title').textContent = selectedDate.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
      const clientsForDay = clients.filter(c => new Date(c.date).toDateString() === selectedDate.toDateString()).sort((a, b) => (a.time || '').localeCompare(b.time || ''));
      if (clientsForDay.length === 0) {
        list.innerHTML = '<li class="empty-text">No clients for this day</li>';
      } else {
        clientsForDay.forEach(client => {
          const li = document.createElement('li');
          li.className = 'client-item';
          li.innerHTML = `
            <div>
              <div class="client-name">${client.name}</div>
              <div class="client-phone">Phone: ${client.phone || 'N/A'}</div>
              <div class="client-request">${client.request}</div>
              ${client.time ? `<div class="client-time">Time: ${client.time}</div>` : ''}
            </div>
            <div class="client-price">$${parseFloat(client.price).toFixed(2)}</div>
          `;
          li.onclick = () => showEditForm(client);
          list.appendChild(li);
        });
      }
    }

    function changeMonth(delta) {
      monthOffset += delta;
      renderCalendar();
      renderClients();
    }

    function setToday() {
      selectedDate = new Date();
      selectedDate.setHours(0, 0, 0, 0);
      monthOffset = 0;
      renderCalendar();
      renderClients();
    }

    function showAddForm() {
      document.getElementById('add-form').classList.remove('hidden');
      document.getElementById('edit-form').classList.add('hidden');
      document.getElementById('add-name').value = '';
      document.getElementById('add-phone').value = '';
      document.getElementById('add-request').value = '';
      document.getElementById('add-time').value = '';
      document.getElementById('add-price').value = '';
      updateSuggestions();
      updatePhoneSuggestions();
    }

    function showEditForm(client) {
      document.getElementById('add-form').classList.add('hidden');
      document.getElementById('edit-form').classList.remove('hidden');
      document.getElementById('edit-id').value = client.id;
      document.getElementById('edit-name').value = client.name;
      document.getElementById('edit-phone').value = client.phone || '';
      document.getElementById('edit-request').value = client.request;
      document.getElementById('edit-time').value = client.time || '';
      document.getElementById('edit-price').value = client.price;
    }

    function cancelForm() {
      document.getElementById('add-form').classList.add('hidden');
      document.getElementById('edit-form').classList.add('hidden');
    }

    function saveClient() {
      const name = document.getElementById('add-name').value.trim();
      const phone = document.getElementById('add-phone').value.trim();
      const request = document.getElementById('add-request').value.trim();
      const time = document.getElementById('add-time').value.trim();
      const price = parseFloat(document.getElementById('add-price').value);
      if (!name || !request || isNaN(price)) return;
      clients.push({
        id: Math.random().toString(),
        name,
        phone,
        request,
        price,
        time: time || null,
        date: selectedDate.toISOString()
      });
      saveClients();
      cancelForm();
      renderClients();
    }

    function updateClient() {
      const id = document.getElementById('edit-id').value;
      const name = document.getElementById('edit-name').value.trim();
      const phone = document.getElementById('edit-phone').value.trim();
      const request = document.getElementById('edit-request').value.trim();
      const time = document.getElementById('edit-time').value.trim();
      const price = parseFloat(document.getElementById('edit-price').value);
      if (!name || !request || isNaN(price)) return;
      clients = clients.map(c => c.id === id ? { ...c, name, phone, request, price, time: time || null } : c);
      saveClients();
      cancelForm();
      renderClients();
    }

    function deleteClient() {
      const id = document.getElementById('edit-id').value;
      clients = clients.filter(c => c.id !== id);
      saveClients();
      cancelForm();
      renderClients();
    }

    function updateSuggestions() {
      const q = document.getElementById('add-name').value.trim().toLowerCase();
      const suggestions = document.getElementById('suggestions-name');
      suggestions.innerHTML = '';
      if (q) {
        const filtered = [...new Set(clients.map(c => c.name))].filter(n => n.toLowerCase().includes(q));
        filtered.forEach(name => {
          const client = clients.find(c => c.name === name);
          const div = document.createElement('div');
          div.className = 'suggestion-item';
          div.textContent = name;
          div.onclick = () => {
            document.getElementById('add-name').value = name;
            if (client.phone) document.getElementById('add-phone').value = client.phone;
            suggestions.innerHTML = '';
          };
          suggestions.appendChild(div);
        });
      }
    }

    function updatePhoneSuggestions() {
      const q = document.getElementById('add-phone').value.trim();
      const suggestions = document.getElementById('suggestions-phone');
      suggestions.innerHTML = '';
      if (q) {
        const filtered = [...new Set(clients.map(c => c.phone))].filter(p => p && p.includes(q));
        filtered.forEach(phone => {
          const client = clients.find(c => c.phone === phone);
          const div = document.createElement('div');
          div.className = 'suggestion-item';
          div.textContent = phone;
          div.onclick = () => {
            document.getElementById('add-phone').value = phone;
            if (client.name) document.getElementById('add-name').value = client.name;
            suggestions.innerHTML = '';
          };
          suggestions.appendChild(div);
        });
      }
    }

    window.onload = () => {
      renderCalendar();
      renderClients();
    };
  </script>
</body>
</html>
